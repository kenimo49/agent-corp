# 設計思想（Design）

## 概要

このディレクトリには、agent-corpにおける設計判断とその理由をまとめています。

設計思想は「**なぜそう設計したか（WHY）**」を説明するドキュメントで、以下の情報を含みます：
- 設計判断の背景
- 検討した選択肢とトレードオフ
- 採用した設計とその理由

## このディレクトリの目的

- 設計判断の背景を共有し、将来の変更時に同じ議論を繰り返さないようにする
- アーキテクチャの全体像を理解し、一貫性のある拡張ができるようにする
- 新規参加者が「なぜこうなっているか」を素早く理解できるようにする

## ドキュメント一覧

### 優先度別

| 優先度 | ドキュメント | 説明 |
|--------|-------------|------|
| ⭐⭐⭐ 必読 | `org-hierarchy.md` | 組織階層設計（CEO/PM/Engineer） |
| ⭐⭐⭐ 必読 | `message-protocol.md` | エージェント間通信プロトコル |
| ⭐⭐ 推奨 | `shared-directory.md` | 共有ディレクトリ設計 |
| ⭐⭐ 推奨 | `agent-design.md` | エージェント設計パターン |
| ⭐ 参考 | `llm-agnostic.md` | LLM非依存設計の理由 |

### カテゴリ別

#### 組織構造

| ドキュメント | 説明 |
|-------------|------|
| `org-hierarchy.md` | CEO/PM/Engineerの階層構造と役割分担 |
| `agent-design.md` | 個々のエージェントの設計パターン |

#### 通信設計

| ドキュメント | 説明 |
|-------------|------|
| `message-protocol.md` | 指示/報告/質問のメッセージ形式 |
| `shared-directory.md` | 共有ディレクトリによるファイル共有 |

#### アーキテクチャ

| ドキュメント | 説明 |
|-------------|------|
| `llm-agnostic.md` | LLM非依存設計の理由と実現方法 |
| `tmux-architecture.md` | tmuxを使った並行実行アーキテクチャ |

---

## 主要な設計判断

### 1. 階層構造の採用

**決定**: CEO → PM → Engineer の3層階層構造を採用

**理由**:
- 責任範囲の明確化（戦略/戦術/実行）
- 人間の組織構造との類似性で理解しやすい
- 上位エージェントが下位エージェントの調整を担当

**トレードオフ**:
- ✅ 役割が明確で拡張しやすい
- ❌ 通信のオーバーヘッドが発生
- ❌ 階層が深いと遅延が増加

→ 詳細は [org-hierarchy.md](./org-hierarchy.md)

### 2. ファイルベース通信の採用

**決定**: エージェント間通信は共有ディレクトリ経由のファイル交換で実現

**理由**:
- LLMエージェントの標準的なファイル操作能力を活用
- 複雑なAPIやソケット通信が不要
- 通信履歴がファイルとして残り、デバッグしやすい

**トレードオフ**:
- ✅ 実装がシンプル
- ✅ LLM間の互換性が高い
- ❌ リアルタイム性は低い
- ❌ ファイルシステムの制約を受ける

→ 詳細は [shared-directory.md](./shared-directory.md)

### 3. LLM非依存設計

**決定**: 特定のLLM（Claude, GPT, Gemini等）に依存しない設計

**理由**:
- LLM技術の急速な進化に対応
- ユーザーの選択肢を広げる
- コスト最適化の柔軟性

**トレードオフ**:
- ✅ 任意のLLMを使用可能
- ✅ 将来のLLMにも対応しやすい
- ❌ 特定LLMの高度な機能は活用しにくい
- ❌ プロンプト設計の制約

→ 詳細は [llm-agnostic.md](./llm-agnostic.md)

---

## ドキュメント作成ガイドライン

新しいdesignドキュメントを追加する際は、以下の構成に従ってください：

```markdown
# タイトル

## 概要
この設計ドキュメントの目的を1-2文で説明

## 背景
なぜこの設計が必要になったか

## 検討した選択肢
### 選択肢A
- メリット: ...
- デメリット: ...

### 選択肢B
- メリット: ...
- デメリット: ...

## 決定
採用した設計とその理由

## 実装詳細
具体的な実装方法

## トレードオフ
採用した設計の利点と欠点

## 関連ドキュメント
- [リンク1](./xxx.md)
- [リンク2](./yyy.md)
```

---

## 関連ドキュメント

- [docs/knowledge/README.md](../knowledge/README.md) - 実践的知識（HOW）
- [docs/flows/README.md](../flows/README.md) - 処理フロー（WHAT）
- [docs/guide/documentation.md](../guide/documentation.md) - ドキュメント作成ガイド

---

## 更新履歴

- 2025-01-24: 初版作成
